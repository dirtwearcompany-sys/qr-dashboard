<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>QR Dashboard Login</title>
  <style>
    body { font-family: Arial; display:flex; align-items:center; justify-content:center; height:100vh; background:#f5f5f5; }
    #loginBox { background:#fff; padding:30px; border-radius:8px; box-shadow:0 0 10px rgba(0,0,0,0.1); }
    input { display:block; width:100%; margin-bottom:15px; padding:10px; font-size:16px; }
    button { padding:10px 20px; font-size:16px; cursor:pointer; }
    .error { color:red; margin-bottom:15px; }
  </style>
</head>
<body>
<div id="loginBox">
  <h2>QR Dashboard Login</h2>
  <div class="error" id="errorMsg"></div>
  <input type="email" id="email" placeholder="Email" required>
  <input type="password" id="password" placeholder="Password" required>
  <button id="loginBtn">Login</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyDPfjv3ZZ18ELPiC2Jc-z_yk86ejOvAad4",
  authDomain: "qr-tracker-4b53e.firebaseapp.com",
  projectId: "qr-tracker-4b53e"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

const loginBtn = document.getElementById("loginBtn");
const errorMsg = document.getElementById("errorMsg");

// If already logged in, redirect to dashboard
onAuthStateChanged(auth, (user) => {
  if(user) window.location.href = "dashboard.html";
});

loginBtn.addEventListener("click", async () => {
  errorMsg.textContent = "";
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;

  try {
    await signInWithEmailAndPassword(auth, email, password);
    window.location.href = "dashboard.html";
  } catch(e) {
    if (e.code === "auth/user-not-found") errorMsg.textContent = "No account found with this email.";
    else if (e.code === "auth/wrong-password") errorMsg.textContent = "Incorrect password.";
    else errorMsg.textContent = "Login failed. Try again.";
  }
});
</script>
</body>
</html>
