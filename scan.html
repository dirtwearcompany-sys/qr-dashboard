<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>QR Redirect</title>
</head>
<body>
<p>Redirecting...</p>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, doc, getDoc, updateDoc, increment } 
    from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  // ðŸ”¥ SAME Firebase config as index.html
  const firebaseConfig = {
    piKey: "AIzaSyDPfjv3ZZ18ELPiC2Jc-z_yk86ejOvAad4",
  authDomain: "qr-tracker-4b53e.firebaseapp.com",
  projectId: "qr-tracker-4b53e"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Get QR ID from URL
  const params = new URLSearchParams(window.location.search);
  const id = params.get("id");

  if (!id) {
    document.body.innerHTML = "Invalid QR code";
    throw new Error("No QR ID");
  }

  const ref = doc(db, "qrcodes", id);
  const snap = await getDoc(ref);

  if (!snap.exists()) {
    do
